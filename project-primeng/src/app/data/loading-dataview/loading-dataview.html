<div class="card">
    <div *ngIf="isLoading()">
        <div class="flex flex-col">
            <div *ngFor="let i of counterArray(6); let first = first">
                <div class="flex flex-col xl:flex-row xl:items-start p-6 gap-6"
                    [ngClass]="{ 'border-t border-surface-200 dark:border-surface-700': !first }">
                    <p-skeleton class="!w-9/12 sm:!w-64 xl:!w-40 !h-24 mx-auto" />
                    <div class="flex flex-col sm:flex-row justify-between items-center xl:items-start flex-1 gap-6">
                        <div class="flex flex-col items-center sm:items-start gap-4">
                            <p-skeleton width="8rem" height="2rem" />
                            <p-skeleton width="6rem" height="1rem" />
                            <div class="flex items-center gap-4">
                                <p-skeleton width="6rem" height="1rem" />
                                <p-skeleton width="3rem" height="1rem" />
                            </div>
                        </div>
                        <div class="flex sm:flex-col items-center sm:items-end gap-4 sm:gap-2">
                            <p-skeleton width="4rem" height="2rem" />
                            <p-skeleton size="3rem" shape="circle" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div *ngIf="!isLoading()">
        <div *ngFor="let item of products(); let first = first">
            <div class="flex flex-col xl:flex-row xl:items-start p-6 gap-6"
                [ngClass]="{ 'border-t border-surface-200 dark:border-surface-700': !first }">
                <img [src]="'https://primefaces.org/cdn/primeng/images/demo/product/' + item.image"
                    alt="{{ item.name }}" class="w-40 rounded" />
                <div class="flex flex-col justify-between flex-1 gap-6">
                    <div>
                        <h3 class="font-semibold">{{ item.name }}</h3>
                        <p class="text-sm text-gray-600">{{ item.category }}</p>
                    </div>
                    <div class="text-lg font-semibold">{{ item.price | currency:'USD' }}</div>
                </div>
            </div>
        </div>
    </div>
</div>


<div *ngIf="!isLoading()">
    <p-dataview [value]="products()" [layout]="layout">
        <ng-template #header>
            <div class="flex justify-end">
                <p-selectbutton [(ngModel)]="layout" [options]="options" [allowEmpty]="false">
                    <ng-template #item let-option>
                        <i [class]="'pi ' + (option === 'list' ? 'pi-bars' : 'pi-table')"></i>
                    </ng-template>
                </p-selectbutton>
            </div>
        </ng-template>

        <ng-template #list let-product>
            <div
                class="flex flex-col xl:flex-row xl:items-start p-6 gap-6 border-t border-surface-200 dark:border-surface-700">
                <div class="md:w-40 relative">
                    <img class="block xl:block mx-auto rounded w-full"
                        [src]="'https://primefaces.org/cdn/primeng/images/demo/product/' + product.image"
                        [alt]="product.name" />
                    <p-tag [value]="product.inventoryStatus" [severity]="getSeverity(product)"
                        class="absolute dark:!bg-surface-900" [style.left.px]="4" [style.top.px]="4"></p-tag>
                </div>
                <div class="flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6">
                    <div class="flex flex-row md:flex-col justify-between items-start gap-2">
                        <div>
                            <span class="font-medium text-surface-500 dark:text-surface-400 text-sm">{{
                                product.category }}</span>
                            <div class="text-lg font-medium mt-2">{{ product.name }}</div>
                        </div>
                        <div class="bg-surface-100 p-1" style="border-radius: 30px">
                            <div class="bg-surface-0 flex items-center gap-2 justify-center py-1 px-2" style="
                    border-radius: 30px;
                    box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.04),
                      0px 1px 2px 0px rgba(0, 0, 0, 0.06);
                  ">
                                <span class="text-surface-900 font-medium text-sm">{{ product.rating }}</span>
                                <i class="pi pi-star-fill text-yellow-500"></i>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col md:items-end gap-8">
                        <span class="text-xl font-semibold">{{
                            product.price | currency: 'USD'
                            }}</span>
                        <div class="flex flex-row-reverse md:flex-row gap-2">
                            <button pButton icon="pi pi-heart" [outlined]="true"></button>
                            <button pButton icon="pi pi-shopping-cart" label="Buy Now"
                                [disabled]="product.inventoryStatus === 'OUTOFSTOCK'"
                                class="flex-auto md:flex-initial whitespace-nowrap"></button>
                        </div>
                    </div>
                </div>
            </div>
        </ng-template>
    </p-dataview>
</div>